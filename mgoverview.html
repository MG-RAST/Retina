<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Metagenome Data Sheet</title>
    <link rel="icon" href="images/KBase_favicon.ico" type="image/x-icon">
	<script src="js/jquery.min.js"></script>
	<script src="js/stm.js"></script>
	<script src="js/retina.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<script>
    stm.init('http://api.metagenomics.anl.gov').then( function() {
	    Retina.init( { library_resource: "js/" } ).then( function() {
	        Retina.add_widget({"name": "metagenome_overview", "resource": "widgets/",  "filename": "widget.metagenome_overview.js"});
	        Retina.load_widget("metagenome_overview").then( function() {
		        var val = document.URL;
		        var param = "metagenome";
		        var mgid  = "";
		        var cache = true;
		        if (val.indexOf(param) > -1) {
		            var url = val.substr(val.indexOf(param));
		            mgid = url.replace(param+"=","");
		        }
		        Retina.Widget.create('metagenome_overview', {"target": document.getElementById("content"), "id": mgid, "cache": cache});
	        });
	    });
    });
	</script>
  </head>

  <body style="margin-top: 60px; margin-bottom: 100px;">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
	    <div class="container" style="width: 100%; padding-left: 10px;">
          <img src="images/KbaseLogoTransparent.gif" style="float: left; background: white; margin-left: -10px; height: 55px;">
    	  <a class="brand" href="#" style="color: white; cursor: default; margin-top: 8px; margin-left: 30px;">Metagenome Data Sheet</a>
	      <p style="float: right; right:16px; top: 11px; position: relative;cursor: pointer;" onclick="if(document.getElementById('login_name').innerHTML ==''){jQuery('#loginModal').modal('show');}else{if(confirm('do you really want to log out?')){Retina.WidgetInstances.metagenome_modal[0].perform_logout();}}">
	        <i class="icon-user icon-white" style="margin-right: 5px;"></i>
	        <span  id="login_name_span">
	          <input type="button" class="btn" value="login" style="position:relative; bottom: 2px;" onclick="jQuery('#loginModal').modal('show');">
	        </span>
	        <span id="login_name"></span>
	      </p>
	    </div>
      </div>
    </div>
    <div id='mg_selector'>
      <div id="mg_modal" class="modal show fade" tabindex="-1" style="width: 400px;" role="dialog">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h3>Metagenome Selector</h3>
        </div>
        <div id="mg_modal_body" class="modal-body">
          <div class="alert alert-block alert-info" id="progressIndicator" style="top: 100px; width: 300px;">
            <button type="button" class="close" data-dismiss="alert">Ã—</button>
            <h4><img src="images/loading.gif"> Please wait...</h4>
            <p>The data to be displayed is currently loading.</p>
            <p id="progressBar"></p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-danger pull-left" data-dismiss="modal" aria-hidden="true">Cancel</button>
        </div>
      </div>
    </div>
    <div class="container" style="margin-top: 100px; margin-bottom: 100px; width: 1000px;">
      <div>    
        <button style="width:150px;width:150px;position:absolute;top:60px;right:10px;" data-toggle="button" onclick="Retina.WidgetInstances.metagenome_overview[0].metagenome_modal(document.getElementById('content'));" type="button" class="btn">Select Metagenome</button>
      </div>
      <div id='content'></div>
    </div>
  </body>
</html>
